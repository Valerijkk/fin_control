# FinControl ‚Äî –ø—Ä–æ—Å—Ç–æ–π –∏ –±—ã—Å—Ç—Ä—ã–π —É—á—ë—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤ üí∏

![Flutter](https://img.shields.io/badge/Flutter-3.x-02569B?logo=flutter&logoColor=white)
![Dart](https://img.shields.io/badge/Dart-3.x-0175C2?logo=dart&logoColor=white)
![Material 3](https://img.shields.io/badge/Material-3-7E57C2?logo=materialdesign&logoColor=white)
![SQLite](https://img.shields.io/badge/SQLite-local-blue?logo=sqlite&logoColor=white)
![Platforms](https://img.shields.io/badge/Android-‚úì-34A853?logo=android&logoColor=white)
![License](https://img.shields.io/badge/License-MIT-black)

–£—á–µ–±–Ω—ã–π pet-project –Ω–∞ **Flutter** –¥–ª—è **–º–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–æ–≥–æ —É—á—ë—Ç–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤/–¥–æ—Ö–æ–¥–æ–≤**: –ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î, —Ñ–æ—Ç–æ —á–µ–∫–æ–≤, —É–º–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ç—ë–º–Ω–∞—è —Ç–µ–º–∞ –∏ –æ—Ñ–ª–∞–π–Ω-–∫—É—Ä—Å—ã –≤–∞–ª—é—Ç. üöÄ

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚ö°Ô∏è **–ë—ã—Å—Ç—Ä–∞—è –∑–∞–ø–∏—Å—å** (bottom-sheet: —Å—É–º–º–∞ + –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
- üìù –ü–æ–ª–Ω–∞—è –∑–∞–ø–∏—Å—å: **—Å—É–º–º–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –¥–æ—Ö–æ–¥/—Ä–∞—Å—Ö–æ–¥, –¥–∞—Ç–∞**, **—Ñ–æ—Ç–æ —á–µ–∫–∞** (–∫–∞–º–µ—Ä–∞)
- üè∑Ô∏è **–°–≤–æ–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** ‚Äî –¥–æ–±–∞–≤–ª—è–π –ø—Ä—è–º–æ –∏–∑ —Ñ–æ—Ä–º—ã/—Ñ–∏–ª—å—Ç—Ä–∞, –≤—Å—ë —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- üßπ –°–ø–∏—Å–æ–∫ —Å **—Å–≤–∞–π–ø-—É–¥–∞–ª–µ–Ω–∏–µ–º** –∏ **UNDO** —á–µ—Ä–µ–∑ Snackbar
- üîé **–ü–æ–∏—Å–∫** –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ **–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º** –∏ **–ø–µ—Ä–∏–æ–¥—É** (—Å–µ–≥–æ–¥–Ω—è / 7 / 30 –¥–Ω–µ–π / –≤—Å—ë)
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: —Å—É–º–º—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –¥–æ–ª–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤, –æ–±—â–∏–π –∏—Ç–æ–≥
- üåó **–¢—ë–º–Ω–∞—è —Ç–µ–º–∞** (M3), –±—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ —à–∞–ø–∫–µ –∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- üí± **–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç (RUB‚ÜíUSD/EUR)**: 2 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ + –∫—ç—à, –æ—Ñ–ª–∞–π–Ω-–ø–æ–∫–∞–∑ –±–µ–∑ –ø–∞–¥–µ–Ω–∏–π
- üíæ –î–∞–Ω–Ω—ã–µ **–æ—Ñ–ª–∞–π–Ω** (SQLite —á–µ—Ä–µ–∑ `sqflite`) + –∫—ç—à –∫—É—Ä—Å–æ–≤ —á–µ—Ä–µ–∑ `shared_preferences`

---

## üß≠ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

````bash
lib/
‚îú‚îÄ main.dart
‚îú‚îÄ core/
‚îÇ  ‚îú‚îÄ routes.dart             # –∏–º–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îÇ  ‚îú‚îÄ app\_theme.dart          # —Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è —Ç–µ–º–∞ (Material 3)
‚îÇ  ‚îú‚îÄ categories.dart         # –∏–∫–æ–Ω–∫–∏/—Ü–≤–µ—Ç–∞/–¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
‚îÇ  ‚îî‚îÄ formatters.dart         # money(), shortDayHeader(), isWithinDays()
‚îú‚îÄ data/
‚îÇ  ‚îú‚îÄ db.dart                 # SQLite (sqflite)
‚îÇ  ‚îî‚îÄ category\_store.dart     # –ø–µ—Ä—Å–∏—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π (shared\_preferences)
‚îú‚îÄ domain/
‚îÇ  ‚îú‚îÄ models/expense.dart
‚îÇ  ‚îî‚îÄ repositories/expense\_repository.dart
‚îú‚îÄ services/
‚îÇ  ‚îî‚îÄ rates\_api.dart          # 2 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∫—É—Ä—Å–æ–≤ + –∫—ç—à
‚îú‚îÄ state/
‚îÇ  ‚îú‚îÄ app\_state.dart          # ChangeNotifier: CRUD/undo + –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
‚îÇ  ‚îú‚îÄ app\_scope.dart          # InheritedNotifier –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é
‚îÇ  ‚îî‚îÄ theme\_controller.dart   # InheritedWidget –¥–ª—è —Ç–µ–º—ã
‚îî‚îÄ ui/
‚îú‚îÄ screens/                # welcome, shell, home, add\_edit, stats, settings, photo\_viewer
‚îî‚îÄ widgets/                # app\_bar\_title, theme\_action, settings\_action,
\# primary\_button, summary\_card, expense\_tile,
\# bar\_row, rates\_card
````

> –ü–æ—á–µ–º—É —Ç–∞–∫? üß©  
> ‚Äì **UI** –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ –ë–î ‚Üí –≤—Å—è —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ `state`/`domain`.  
> ‚Äì **AppState** –≥–æ–≤–æ—Ä–∏—Ç —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º, –∞ –Ω–µ —Å sqflite –Ω–∞–ø—Ä—è–º—É—é.  
> ‚Äì **Services** (HTTP) –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –¥–∞–Ω–Ω—ã—Ö.  
> ‚Äì –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚Äî –≤ `ui/widgets`.  
> ‚Äì –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–Ω–µ–≥/–¥–∞—Ç ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–æ.


## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

````bash
git clone https://github.com/Valerijkk/fin_control.git
cd fin_control

flutter pub get
flutter run
````

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: Flutter **3.x** ‚úÖ  ‚Ä¢  Dart **3.x** ‚úÖ


## üîå –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### Android (`android/app/src/main/AndroidManifest.xml`) üì±

```xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.yourname.fincontrol.fin_control">
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.READ_MEDIA_IMAGES" />
    <!-- –¥–ª—è SDK <= 32 -->
    <uses-permission
        android:name="android.permission.READ_EXTERNAL_STORAGE"
        android:maxSdkVersion="32" />

    <application
        android:label="FinControl"
        android:icon="@mipmap/ic_launcher"
        android:enableOnBackInvokedCallback="true">
        <!-- –≤–∞—à–∏ activity/intent-filter –∑–¥–µ—Å—å -->
    </application>
</manifest>
```


## üß™ –¢–µ—Å—Ç—ã

–°—Ç—Ä—É–∫—Ç—É—Ä–∞:

```
test/
‚îú‚îÄ flutter_test_config.dart            # init sqflite_common_ffi –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ app_boot_test.dart
‚îú‚îÄ helpers/test_host.dart
‚îú‚îÄ unit/formatters_test.dart
‚îî‚îÄ ui/screens/...
```

`test/flutter_test_config.dart`:

```dart
import 'dart:async';
import 'package:sqflite_common_ffi/sqflite_ffi.dart';

Future<void> testExecutable(FutureOr<void> Function() testMain) async {
  sqfliteFfiInit();
  databaseFactory = databaseFactoryFfi;
  await testMain();
}
```

–ó–∞–ø—É—Å–∫:

```bash
flutter test
```


## üí± –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç: –∫–∞–∫ —Å–¥–µ–ª–∞–Ω–æ

* –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã: `exchangerate.host` ‚Üí fallback `open.er-api.com`
* –¢–∞–π–º–∞—É—Ç—ã –∏ —Å—Ç—Ä–æ–≥–∏–π –ø–∞—Ä—Å–∏–Ω–≥ JSON
* –ö—ç—à –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (`shared_preferences`), –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º **–æ—Ñ–ª–∞–π–Ω** (–µ—Å—Ç—å –æ—Ç–º–µ—Ç–∫–∞)


## üßë‚Äçüíª –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

```bash
# —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
dart format .

# —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
flutter analyze

# —Å–±–æ—Ä–∫–∞ —Ä–µ–ª–∏–∑–∞ Android
flutter build apk --release

# —É—Å—Ç–∞–Ω–æ–≤–∫–∞ apk
flutter install
# –∏–ª–∏
adb install -r build/app/outputs/flutter-apk/app-release.apk
```


## üõ†Ô∏è –¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥

* **`Locale data has not been initialized`** ‚Üí –ª–æ–∫–∞–ª—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ `main()` —á–µ—Ä–µ–∑ `initializeDateFormatting('ru_RU')` (—É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ).
* **`databaseFactory not initialized` –≤ —Ç–µ—Å—Ç–∞—Ö** ‚Üí –ø—Ä–æ–≤–µ—Ä—å `test/flutter_test_config.dart` (—Å–º. –≤—ã—à–µ).
* **`dependOnInheritedWidgetOfExactType... before initState`** ‚Üí —á–∏—Ç–∞—Ç—å `AppScope.of(context)` —Ç–æ–ª—å–∫–æ –≤ `didChangeDependencies()` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ).
* **–ö—É—Ä—Å—ã ¬´–æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏¬ª** ‚Üí –ø–æ–∫–∞–∂–µ—Ç—Å—è –∫—ç—à —Å –ø–æ–º–µ—Ç–∫–æ–π ¬´–æ—Ñ–ª–∞–π–Ω¬ª, –∫–∞–∫ —Ç–æ–ª—å–∫–æ —Å–µ—Ç—å –¥–∞—Å—Ç –æ—Ç–≤–µ—Ç ‚Äî –æ–±–Ω–æ–≤–∏—Ç—Å—è.


## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

* `sqflite`, `path`
* `http`
* `image_picker`
* `intl`
* `shared_preferences`
* (dev) `sqflite_common_ffi`, `flutter_test`, `flutter_lints`


## üîÆ Roadmap

* üåç –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è ru/en —á–µ—Ä–µ–∑ `intl`/ARB
* üí± –í—ã–±–æ—Ä –±–∞–∑–æ–≤–æ–π –≤–∞–ª—é—Ç—ã + –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞—Ñ–∏–∫–∏
* üßæ –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç (CSV/JSON)
* üç∞ –î–∏–∞–≥—Ä–∞–º–º—ã –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ (`fl_chart`)
* üßπ –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏
* üß™ Golden-—Ç–µ—Å—Ç—ã UI


## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—å—é—à–Ω

PR‚Äô—ã welcome! –°–æ–±–ª—é–¥–∞–π **flutter\_lints**, **Conventional Commits** –∏ –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞–π —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–µ—Å—Ç –∫ –Ω–æ–≤–æ–π —Ñ–∏—á–µ. üß™


## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ‚Äî –¥–µ–ª–∞–π —á—Ç–æ —Ö–æ—á–µ—à—å, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–π –∫–æ–ø–∏—Ä–∞–π—Ç. ‚ô•Ô∏è

## üôå –°–ø–∞—Å–∏–±–æ

–ó–∞ –∏–Ω—Ç–µ—Ä–µ—Å –∫ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–º—É Flutter-–∫–æ–¥—É, –º–∏–Ω–∏–º–∞–ª–∏–∑–º—É –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.
–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –∑–∞—à—ë–ª ‚Äî ‚≠ê –∑–≤–µ–∑–¥–∞ –≤ —Ä–µ–ø–æ –∏ –∏–¥–µ–∏ –≤ Issues.
**Good vibes only!** ‚ú®